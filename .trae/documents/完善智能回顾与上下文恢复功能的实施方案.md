## 最终实施方案：智能回顾与上下文恢复（网页+文件）

### 1. 后端 Prompt 升级（ai/mod.rs）
- **目标**：让 AI 不仅提取 URL，还能识别出用户正在处理的本地文件路径（基于窗口标题）。
- **改动**：
  - JSON 结构增加 `related_files` 字段。
  - Prompt 增加指令：“尝试从窗口标题中提取文件路径（如 `C:\...\report.docx`），忽略无路径的纯标题”。

### 2. 后端执行逻辑适配（agent/mod.rs）
- **解析**：接收 AI 返回的 `related_files`。
- **转换**：为每个有效路径生成 `AutomationStep::OpenFile { path }` 步骤。
- **防护**：简单的路径过滤（避免空路径）。

### 3. 前端展示优化（AgentProposalModal.tsx）
- **卡片样式**：
  - 标题与摘要保持现状。
  - 底部增加元数据栏：
    - 🌐 包含 X 个链接
    - 📄 包含 Y 个文件
    - 📝 生成笔记
- **执行反馈**：
  - 点击“归档并恢复”后，后端会依次打开这些网页和文件，并写入笔记。
  - 界面显示“执行中...”，完成后显示“✅ 已恢复上下文”。

### 4. 验证
- 模拟一条包含“编辑 D:\test.txt”的活动记录。
- 确认 AI 能提取出路径。
- 确认点击执行后，能自动打开该文本文件。
